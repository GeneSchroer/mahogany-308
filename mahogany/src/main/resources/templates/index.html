<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
	<head>
		<title>Gerrymandering Analysis Main Page </title>
    	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
		 <!-- Leaflet style sheets and scripts -->	
    	<link rel="stylesheet" href="/leaflet/leaflet.css" />
		<script src="/leaflet/leaflet.js"></script>
		<!-- Load Esri map from source-->
		<script src="http://cdn-geoweb.s3.amazonaws.com/esri-leaflet/1.0.0-rc.3/esri-leaflet.js"></script>
		
		<script src="/leaflet/Gerrymander.js"></script>
		
		<!-- Dojo style sheets and scripts-->
		<link rel="stylesheet" href="/dijit/themes/nihilo/nihilo.css"/>
		<script src="/dojo/dojo.js" data-dojo-config="async:true" ></script>
	
	<!-- Local style sheets for page -->
	<link rel="stylesheet" href="/css/nihilo_override.css"/>
	<link rel="stylesheet" type="text/css" href="/css/style.css"/>
	
    

    	<style>
    	
    		.info{
    			padding: 6px 8px;
    			font: 15px Arial, Helvetica, sans-serif;
    			background: white;
    			box-shadow: 0 0 15px black;
    			margin: 0 0 5px;
    			color: #777;
    			border-radius: 5px;
        }
      
        #map_g{
   			position: absolute;
        		height: 100%;
        		width: 100%;
        }
        
        #map_r{
   			position: absolute;
        		height: 100%;
        		width: 100%;
        }
        
        #loadingOverlay{
        	background: #fff url('./dijit/themes/claro/images/progressBarAnim.gif') no-repeat 10px 23px ;
        }
        
        
        
    </style>
	 <script>
		
    		require(["javascript/LoadingScreen","dojo/parser", "dijit/layout/ContentPane", "dijit/layout/BorderContainer", "dijit/layout/TabContainer", 
    		"dijit/layout/AccordionContainer", "dijit/form/Button", "dijit/form/Select"], function(LoadingScreen, parser){
    			var loadingScreen = new LoadingScreen("loadingOverlay");	
    			parser.parse();
    			loadingScreen.endLoading();
    		});
    	
	</script>
	</head>

	<body class="nihilo">
	<div id="loadingOverlay" class="loadingMessage pageOverlay">Loading</div>
	<div data-dojo-type="dijit/layout/BorderContainer" style="height:100%; width:100%;">
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'" style="height:5%;">
			<div th:replace="headerLinks :: links"></div>
		</div>
	
		<div data-dojo-type="dijit/layout/TabContainer" data-dojo-props="region: 'center'" > 
			<div data-dojo-type="dijit/layout/BorderContainer" title="Gerrymandering">
				<div data-dojo-type="dijit/layout/AccordionContainer" data-dojo-props="region:'left', splitter:true" style="width:40%">
					<div data-dojo-type="dijit/layout/ContentPane" title="Superdistrict Creator">

					</div>
			        <div data-dojo-type="dijit/layout/ContentPane" title="Data #2">More data here</div>
			       	<div data-dojo-type="dijit/layout/ContentPane" title="Data #3">
				       	
			       	</div>
				</div>
				<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'" id="gerrymanderingMapPane">
					<div data-dojo-type="dijit/form/Select">
						
					</div>
					<div id="map_g"></div>
				</div>
			</div>
			<div data-dojo-type="dijit/layout/BorderContainer" title="Redistricting">
				<div data-dojo-type="dijit/layout/AccordionContainer" data-dojo-props="region:'left', splitter:true" style="width:40%">
					<div data-dojo-type="dijit/layout/ContentPane" title="Data #1">
					<div>Choose a method of redistricting</div>
						<select name="redistrctingSelect" data-dojo-type="dijit/form/Select">
							<option value="Existing">Create from existing districts</option>
						</select>
						<button data-dojo-type="dijit/form/Button">Create</button>
						<button data-dojo-type="dijit/form/Button">Edit</button>
						<button data-dojo-type="dijit/form/Button">Delete</button>
					
					</div>
			        <div data-dojo-type="dijit/layout/ContentPane" title="Data #2">More data here</div>
			        <div data-dojo-type="dijit/layout/ContentPane" title="Data #3"></div>
			    </div>
				<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'" id="redistrictingMapPane">
					<div id="map_r"></div>
				</div>
			</div>
		</div>
	</div>
	</body>
	<script>
	
	var map_g = L.map('map_g').setView([38, -88], 4);
	
	L.esri.basemapLayer('Topographic').addTo(map_g);
	var map_r = L.map('map_r').setView([38, -88], 4);
	L.esri.basemapLayer('Topographic').addTo(map_r);
	require([ "dojo/request","./leaflet/Gerrymander.js"], function(request){
		var g;
		var r;
		var statesData;
		request("stateData.json", {
			method: "GET",
			handleAs: "json"
		}).response.then(function(data){
			statesData = data.data;
		
		
		g = GerrymanderController
		.GerrymanderControllerBuilder
		.addMap(map_g)
		.addStateBorders(statesData)
		.build();
	
		r = GerrymanderController
		.GerrymanderControllerBuilder
		.addMap(map_r)
		.addStateBorders(statesData)
		.build();
		});
		var y = null;
	});
	</script>

</html>