<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
	<!-- Project by Lifeng Lin, Sung Jae Min, Xianwen Peng, and Gene Schroer -->
    <!-- Web GUI by Sung Jae Min and Gene Schroer -->
	<title>Gerrymandering Analysis Home Page</title>

  <link rel="stylesheet" href="/leaflet/leaflet.css" />
		<script src="/leaflet/leaflet.js"></script>
		<script src="http://cdn-geoweb.s3.amazonaws.com/esri-leaflet/1.0.0-rc.3/esri-leaflet.js"></script>

	<!-- Dojo style sheets and scripts-->
	<link rel="stylesheet" href="./dijit/themes/nihilo/nihilo.css"/>
	<script src="dojo/dojo.js" data-dojo-config="async:true" ></script>



		<!-- Local style sheets for page -->
	<link rel="stylesheet" href="./css/nihilo_override.css"/>
	<link rel="stylesheet" type="text/css" href="./css/style.css"/>
	
	<script>
		require([
			"javascript/LoadingScreen",
			"dojo/parser", 
			"dijit/layout/ContentPane", 
			"dijit/layout/BorderContainer", 
			"dijit/layout/TabContainer",
			"dijit/layout/AccordionContainer", 
			"dijit/form/Button", 
			"dijit/form/Select"
			], function(LoadingScreen, parser){
    			var loadingScreen = new LoadingScreen("loginLoadingScreen");	
    			parser.parse();
    			loadingScreen.endLoading();
    		});
			
			require([
				"dojo/dom",
				"dojo/dom-style",
				"dojo/request",
				"dojo/domReady!"
			], function(dom, domStyle, request){
				var mapBlock = dom.byId("loginPageMap");
				domStyle.set(mapBlock, "width", "100%");
				domStyle.set(mapBlock, "height", "100%");
				domStyle.set(mapBlock, "position", "absolute");
				
				var map = L.map(mapBlock).setView([32, -80], 4);
				L.esri.basemapLayer('Topographic').addTo(map);

				var mapLayer = L.geoJson();
				mapLayer.addTo(map);
				request("Massachusetts14.geojson",{
					method:"GET",
					handleAs:"json"
				}).response.then(function(success){
					console.log(success.data);
					mapLayer.addData(success.data);
				});
			});
		
		</script>
	</head>
<body class="nihilo">
	
	<div id="loginLoadingScreen" class="loadingMessage pageOverlay loadingOverlay">Loading</div>
	<div data-dojo-type="dijit/layout/BorderContainer" style="height:100%; width:100%">
		<div th:if="${session.userName} != null">
			<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'">
				<div th:replace="headerLinks :: links"></div>
			</div>
		</div>
		<div data-dojo-type="dijit/layout/BorderContainer" data-dojo-props="region:'left'" style="width:20%;">
			<div th:if="${loginError} != null">
				<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'top'" style="height:6%;">
					<div style="color:red;" th:text="${loginError}"></div>
				</div>
			</div>
			<div data-dojo-type="dijit/layout/TabContainer" data-dojo-props="region:'center'">
				<!-- Login form -->
				<div data-dojo-type="dijit/layout/ContentPane" title="Login">
					<form action="/login" method="POST">
						<table>
							<tr>
								<td><label>User Name: </label></td>
								<td><input name="userName" type="text"/></td>
							</tr>
							<tr>
								<td><label>Password: </label></td>
								<td><input name="password" type="password"/></td>
							</tr>
							<tr>
								<td><input type="submit"/></td>
							</tr>
						</table>
					</form>
				</div>
				<!-- Registration form -->
				<div data-dojo-type="dijit/layout/ContentPane" title="Registration">
					<form action="/register" method="POST">
						<table>
							<tr>	
								<td><label>User Name: </label></td>
								<td><input id="userName" name="userName" type="text" /></td>
							</tr>
							<tr>
								<td><label>Password: </label></td>
								<td><input id="password" name="password" type="password" /></td>
							</tr>
							<tr>
								<td><label>Confirm Password: </label></td>
								<td><input name="confirmPassword" type="password"/></td>
							</tr>
							<tr>
								<td><input id="registerSubmit" type="submit"/></td>
							</tr>
						</table>
					</form>
				</div>
			</div>
		</div>
		<!-- map pane -->		
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'center'">
			<div id="loginPageMap"></div>
		</div>
		<!-- information about gerrymandering -->
		<div data-dojo-type="dijit/layout/ContentPane" data-dojo-props="region:'bottom'" style="height:20%;">
		</div>
	</div>
</body>
</html>